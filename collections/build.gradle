plugins {
    id("java")
    id("com.github.johnrengelman.shadow") version "7.1.1"
    id("jacoco")
}

allprojects {
    apply plugin: 'java'
    apply plugin: 'idea'
    apply plugin: 'jacoco'
 
    repositories {
        mavenCentral()
    }

    sourceCompatibility = 1.11
    targetCompatibility = 1.11

    test {
        finalizedBy jacocoTestReport // report is always generated after tests run
    }

    jacocoTestReport {
        dependsOn test // tests are required to run before generating the report
    }

}

idea {
    module {
        downloadSources = true
        downloadJavadoc = true
        excludeDirs = [file('.gradle'), file(".idea"), file('build')]
    }
}
