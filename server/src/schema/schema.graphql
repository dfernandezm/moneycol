# https://alligator.io/graphql/graphql-sdl/
# https://graphql.org/learn/queries/
type BankNote {
  country: String!,
  banknoteName: String!,
  year: String!,
  catalogCode: String!,
  description: String,
  detailLink: String,
  imageFront: String,
  imageBack: String
}

type SearchResult {
  results: [BankNote],
  total: Int
}


type BankNoteCollection {
  collectionId: String!,
  name: String!,
  description: String!,
  bankNotes: [BankNote]!
}

type CollectionResult {
  collections: [BankNoteCollection!]!
}

input BankNoteInputCollectionItem {
  # TODO: This should be an id autogenerated at indexing time, for now it's the _id
  # of the document inside Elasticsearch
  id: String!
}

input NewCollectionInput {
  name: String!,
  description: String!,
  collectorId: String!
}

input AddBankNoteToCollection {
  collectionId: String!,
  collectorId: String!,
  bankNoteCollectionItem: BankNoteInputCollectionItem!
}

input UpdateCollectionInput { 
  name: String!,
  description: String!
}

type Query {
  # Search for banknotes
  search(term: String!, from: Int, to: Int): SearchResult!
  collections(collectorId: String!): [BankNoteCollection]!
  itemsForCollection(collectionId: String!): BankNoteCollection
}

type Mutation {
  addCollection(collection: NewCollectionInput): BankNoteCollection!
  addBankNoteToCollection(data: AddBankNoteToCollection): BankNoteCollection!
  removeBankNoteFromCollection(banknoteId: String!, collectionId: String!): BankNoteCollection!
  updateCollection(collectionId: String!, data: UpdateCollectionInput): BankNoteCollection!
  deleteCollection(collectionId: String!): Boolean
}

schema {
  query: Query
  mutation: Mutation
}